ç‚ºäº†ç¢ºä¿ AI åœ¨æ§åˆ¶ Autodesk Dynamo æ™‚ä¸ç™¼ç”Ÿä½ç´šéŒ¯èª¤ï¼ˆå¦‚é»åº§æ¨™é‡ç–Šã€èª¤ç”¨ 2D ç¯€é»ç­‰ï¼‰ï¼Œç‰¹è¨‚å®šæ­¤è¦ç¯„ã€‚**AI åœ¨åŸ·è¡Œä»»ä½•ç¹ªåœ–æŒ‡ä»¤å‰å¿…é ˆæª¢æŸ¥æ­¤è¦ç¯„ã€‚**


## ğŸ“‚ å°ˆæ¡ˆçµæ§‹

- **`bridge/`**: **[æ ¸å¿ƒæ©‹æ¥]** å­˜æ”¾é€šè¨Šèˆ‡å·¥å…·é‚è¼¯ã€‚
  - `python/server.py`: ä¸»è¦ MCP è™•ç†å™¨èˆ‡ WebSocket ä¼ºæœå™¨ã€‚
  - `node/index.js`: Stdio-to-WS æ©‹æ¥å™¨ï¼ˆä¾› AI Client èª¿ç”¨ï¼‰ã€‚
- **`mcp_config.json`**: ä¸­å¿ƒåŒ–é…ç½®æ–‡ä»¶ã€‚
- `DynamoViewExtension/`: C# åŸå§‹ç¢¼ï¼ŒåŒ…å« `common_nodes.json` (ç¯€é»ç°½åå®šç¾©)ã€‚
- `DynamoScripts/`: è…³æœ¬åº«ï¼Œå­˜æ”¾ç¶“éæ¸¬è©¦çš„å¸¸ç”¨ Dynamo JSON åœ–è¡¨å®šç¾©ã€‚
- `domain/`: **[SOP çŸ¥è­˜åº«]** æ¨™æº–æ“ä½œç¨‹åºèˆ‡æ•…éšœæ’é™¤æŒ‡å—ã€‚
- `tests/`: é©—è­‰ã€æ•ˆèƒ½æ¸¬è©¦ã€åŠŸèƒ½æª¢æŸ¥ã€‚
- `examples/`: æä¾›çµ¦é–‹ç™¼è€…çš„åŸºæº–ç¯„ä¾‹ã€‚
- `image/`: **[è¦–è¦ºåŒ–ç”¢å‡º]** å­˜æ”¾ `/image` æŒ‡ä»¤ç”¢å‡ºçš„è…³æœ¬åˆ†æåœ–è¡¨èˆ‡æŠ€è¡“æ–‡æª”ã€‚
- `deploy.ps1`: **[ä¸€éµéƒ¨ç½²]** ç·¨è­¯ä¸¦å®‰è£æ’ä»¶è‡³ Dynamo å¥—ä»¶è·¯å¾‘ã€‚
- **`GEMINI.md`**: **[AI å¿…è®€]** æŒ‡å°è¦ç¯„ã€‚
- **`QUICK_REFERENCE.md`**: **[å¿«é€Ÿåƒè€ƒ]** å¸¸ç”¨ç¯„ä¾‹ã€‚

## ğŸ§  AI å”ä½œæŒ‡ä»¤

æ­¤å°ˆæ¡ˆæ¡ç”¨ã€Œä¸Šä¸‹æ–‡å·¥ç¨‹ (Context Engineering)ã€ç­–ç•¥ï¼Œå€åˆ† **é«˜éšè¦å‰‡ (Rules)** èˆ‡ **å…·é«”è¦æ ¼ (Specs)**ã€‚AI åŠ©æ‰‹å¿…é ˆéµå¾ªä»¥ä¸‹æŒ‡ä»¤èˆ‡è¡Œç‚ºæ¨¡å¼ï¼š

### 1. æŒ‡ä»¤å®šç¾©èˆ‡è¡Œç‚ºæ¨¡å¼
| æŒ‡ä»¤ | è¡Œç‚ºè¦ç¯„ (AI å¿…é ˆåŸ·è¡Œçš„å‹•ä½œ) |
| :--- | :--- |
| **`/lessons`** | **æ™ºæ…§æç…‰**ï¼šå¾æˆåŠŸå°è©±ä¸­æå–ã€Œé«˜éšè¦å‰‡æˆ–é¿å‘ç¶“é©—ã€,ä¸¦ä»¥ **Append (è¿½åŠ )** æ–¹å¼å¯«å…¥æ­¤ `GEMINI.md` æœ«å°¾ã€‚åš´ç¦åªè¨˜ä»£ç¢¼ç´°ç¯€ã€‚ |
| **`/domain`** | **SOP è½‰æ›**ï¼šå°‡æˆåŠŸçš„å°è©±å·¥ä½œæµç¨‹è½‰æ›ç‚ºæ¨™æº– SOP æ ¼å¼çš„ `domain/*.md` æª”æ¡ˆã€‚æ­¥é©Ÿï¼š(1) ç¢ºèªå°è±¡ (2) æå–å·¥å…·å’Œæ­¥é©Ÿ (3) ç”¨ YAML frontmatter + MD æ ¼å¼æ’°å¯« (4) å„²å­˜è‡³ `domain/` (5) æ›´æ–°è§¸ç™¼è¡¨ã€‚ |
| **`/review`** | **æ†²æ³•å¯©è¨ˆ**ï¼šæª¢æŸ¥ `GEMINI.md` æ˜¯å¦éæ–¼è‚¥å¤§ã€‚ç•¶è¦å‰‡è¶…é 100 è¡Œï¼Œæè­°å°‡å…·é«”çš„ã€Œè¦æ ¼æˆ–æ¡ˆä¾‹ã€é·ç§»è‡³ `domain/` æˆ– `docs/`ã€‚ |
| **`/explain`** | **è¦–è¦ºåŒ–è§£æ§‹**ï¼šè§£é‡‹è¤‡é›œæ¦‚å¿µæ™‚ï¼Œ**å¼·åˆ¶ä½¿ç”¨** Markdown è¡¨æ ¼ã€ASCII æµç¨‹åœ–æˆ– Mermaid åœ–è¡¨ã€‚åš´ç¦æä¾›å†—é•·çš„æ–‡å­—ç‰†ã€‚ |
| **`/image`** | **è…³æœ¬è¦–è¦ºåŒ–åˆ†æ**ï¼šä¾ç…§ [`domain/visual_analysis_workflow.md`](domain/visual_analysis_workflow.md) ä¹‹æ¨™æº–æµç¨‹åŸ·è¡Œã€‚è‡ªå‹•åµæ¸¬ç•¶å‰å·¥ä½œå€æª”åï¼Œè‹¥æœªå­˜æª”å‰‡æç¤ºä½¿ç”¨è€…ã€‚ç”¢å‡ºåŒ…å«ï¼š(1) æŠ€è¡“æ–‡æª” (2) è¦–è¦ºåŒ–å„€è¡¨æ¿åœ–ç‰‡ (**å¼·åˆ¶ 16:9 Cinematic Landscape æ ¼å¼**)ã€‚æ‰€æœ‰ç”¢å‡ºé ˆå­˜è‡³ `image/` è³‡æ–™å¤¾ã€‚ |
| **`/save`** | **è³‡ç”¢å…¥åº«**ï¼šç•¶ä½¿ç”¨è€…å°ç›®å‰çš„ç”Ÿæˆçµæœæ»¿æ„æ™‚ï¼Œæ‰‹å‹•è§¸ç™¼æ­¤æŒ‡ä»¤å°‡ JSON è…³æœ¬å­˜å…¥ `DynamoScripts/`ã€‚**åš´ç¦ AI åœ¨æœªç²å¾— /save æŒ‡ä»¤å‰ä¸»å‹•ä¿®æ”¹è…³æœ¬åº«ã€‚** |



### 2. æ ¸å¿ƒè¡Œç‚ºç¾©å‹™ (ä¸éœ€è¦æŒ‡ä»¤å³å¯è§¸ç™¼)
- **è…³æœ¬åº«å„ªå…ˆåŸå‰‡ (Library-First Pattern)**ï¼šåœ¨é–‹å§‹ä»»ä½•ä»»å‹™å‰ï¼Œ**å¿…é ˆä¸»å‹•** åŸ·è¡Œä»¥ä¸‹æµç¨‹ï¼š
  1. æŸ¥è©¢ `DynamoScripts/` è…³æœ¬åº«ï¼ˆæŸ¥æ‰¾ç›¸é—œç¾æˆè…³æœ¬ï¼‰
  2. è‹¥æ‰¾åˆ°åŒ¹é…è…³æœ¬ï¼ŒåŠ è¼‰ä¸¦æ‡‰ç”¨åƒæ•¸
  3. è‹¥æ‰¾ä¸åˆ°ï¼Œæ‰ç”Ÿæˆæ–°è…³æœ¬
  - è©³è¦‹ï¼š[`domain/improved_workflow_guideline.md`](domain/improved_workflow_guideline.md)
- **è‡ªå‹•é æª¢ (Auto-Precheck)**ï¼šåœ¨é–‹å§‹ä»»ä½•ä»»å‹™å‰ï¼Œæˆ‘ **å¿…é ˆä¸»å‹•** æª¢ç´¢ `domain/`ã€`scripts/` ä»¥åŠ `GEMINI.md`ã€‚å¦‚æœå·²æœ‰å…ˆå‰æˆåŠŸçš„ç­–ç•¥ï¼Œå¿…é ˆå„ªå…ˆåƒè€ƒï¼Œåš´ç¦é‡è¤‡æ’°å¯«é¡ä¼¼é‚è¼¯çš„ JSONã€PYã€‚
- **è¦æ ¼é©…å‹• (SDD)**ï¼šé‡å¤§è®Šæ›´å‰æ‡‰å…ˆæ›´æ–° `domain/` ä¸­çš„ MD æ–‡ä»¶ï¼ˆè¦æ ¼ï¼‰ï¼Œè€Œéç›´æ¥ä¿®æ”¹ç¨‹å¼ç¢¼ã€‚
- **æ–‡ä»¶åŒæ­¥ç¾©å‹™ (Documentation Sync)**ï¼šæ›´æ–° `README.md` æ™‚ï¼Œ**å¿…é ˆåŒæ­¥æ›´æ–°** `README_EN.md`ï¼Œç¢ºä¿ä¸­è‹±æ–‡ç‰ˆæœ¬å…§å®¹ä¸€è‡´ã€‚æ­¤è¦ç¯„é©ç”¨æ–¼æ‰€æœ‰æ¶‰åŠ README çš„ä¿®æ”¹ã€æ–°å¢æˆ–åˆªé™¤æ“ä½œã€‚

### ğŸ“‚ è…³æœ¬èˆ‡çŸ¥è­˜çµ„ç¹”è¦ç¯„
- **`domain/`**: å­˜æ”¾é•·æœŸæ¥­å‹™é‚è¼¯ã€æ³•è¦åˆ†æç­–ç•¥ã€æˆåŠŸçš„ AI å”ä½œç¶“é©— (MD æ ¼å¼)ã€‚
- **`DynamoScripts/`**: å­˜æ”¾ç©©å®šçš„åº•å±¤æ ¸å¿ƒ MCP å·¥å…· (JSON)ã€‚
- **`examples/`**: å­˜æ”¾åƒæ•¸åŒ–ã€å¯é‡è¤‡èª¿ç”¨çš„ç©©å®šå·¥ä½œæµè…³æœ¬(PY)ã€‚
- **`tests/`**: å­˜æ”¾ä»»å‹™å°å‘ã€ä¸€æ¬¡æ€§æˆ–é™¤éŒ¯ç”¨çš„é›œé¤˜è…³æœ¬ã€‚
- **`image/`**: å­˜æ”¾ `/image` æŒ‡ä»¤ç”¢å‡ºçš„ Dynamo è…³æœ¬è¦–è¦ºåŒ–åˆ†æçµæœï¼ˆåŒ…å« Mermaid åœ–è¡¨ã€æŠ€è¡“æ–‡æª”ï¼‰ã€‚


## 0. å•Ÿå‹•èˆ‡ç‹€æ…‹æª¢æŸ¥ (Startup & Status Check)

> **ğŸ“‹ å®Œæ•´æª¢æŸ¥æµç¨‹è«‹åƒè€ƒ**ï¼š[`domain/startup_checklist.md`](domain/startup_checklist.md)

- **å¼·åˆ¶åŸ·è¡Œåˆ†æ**ï¼šAI åœ¨é€²è¡Œä»»ä½•å¯¦è³ªä½œæ¥­å‰ï¼Œ**å¿…é ˆ**å…ˆåŸ·è¡Œ `analyze_workspace` å·¥å…·ã€‚åœ¨ WebSocket æ–¹æ¡ˆä¸‹ï¼Œé€™å°‡é©—è­‰æŒä¹…é€£ç·šæ˜¯å¦å»ºç«‹ã€‚
- **å¹½éˆé€£ç·šå¾¹åº•ä¿®å¾©**ï¼š
    - WebSocket æ–¹æ¡ˆé€éæŒä¹…æ€§ TCP é€£ç·šè§£æ±ºäº†å¹½éˆé€£ç·šå•é¡Œã€‚è‹¥é€£ç·šä¸­æ–·ï¼Œä¼ºæœå™¨æœƒç«‹å³æ„ŸçŸ¥ä¸¦æ¸…é™¤ Sessionã€‚
- **å¼·åˆ¶å›å ±**ï¼šæ¯æ¬¡é€£ç·šå»ºç«‹æˆ–ç’°å¢ƒè®Šå‹•å¾Œï¼ŒAI æœƒæ”¶åˆ°ï¼š
    - `Workspace FileName`: ç¢ºèªç•¶å‰é–‹å•Ÿçš„æª”æ¡ˆã€‚

**ç›¸é—œæ–‡ä»¶**ï¼š
- ğŸ“‹ [å•Ÿå‹•æª¢æŸ¥æ¸…å–®](domain/startup_checklist.md) - æ¨™æº–åŒ– AI åˆå§‹åŒ–æµç¨‹
- ğŸ”§ [æ•…éšœæ’é™¤ SOP](domain/troubleshooting.md) - é€£ç·šå¤±æ•—ã€å¹½éˆé€£ç·šç­‰å•é¡Œè§£æ±ºæ–¹æ¡ˆ
- ğŸ¨ [è¦–è¦ºåŒ–åˆ†æ SOP](domain/visual_analysis_workflow.md) - `/image` æŒ‡ä»¤çš„æ¨™æº–åŸ·è¡Œæµç¨‹


---

## ğŸ“š ç¶“é©—æç…‰èˆ‡é¿å‘æŒ‡å— (Lessons Learned)

> **æœ€å¾Œæ›´æ–°**: 2026-01-11 09:52 (GMT+8)  
> **æç…‰ä¾†æº**: å¤šæ¬¡ Dynamo ç¯€é»å‰µå»ºå¤±æ•—èˆ‡æˆåŠŸæ¡ˆä¾‹çš„ç¸½çµ

### ğŸ¯ æ ¸å¿ƒæ•™è¨“ #1ï¼šé›™è»Œç¯€é»å‰µå»ºèˆ‡è‡ªå‹•é™ç´šç­–ç•¥ (Optimization v1.2)

Dynamo MCP æ¡ç”¨é›™è»Œåˆ¶ç­–ç•¥ï¼Œä¸¦å…·å‚™è‡ªå‹•ä¿®å¾©èƒ½åŠ›ï¼š

#### ğŸ›¤ï¸ è»Œé“ Bï¼šåŸç”Ÿç¯€é»è‡ªå‹•æ“´å±• (é¦–é¸ - åƒæ•¸åŒ–å„ªå…ˆ)
**é©ç”¨æƒ…å¢ƒ**ï¼šå¸¸è¦å¹¾ä½•ï¼ˆé»ã€ç·šã€ç«‹æ–¹é«”ï¼‰ã€‚
**å„ªå‹¢**ï¼šJSON èªæ„æ¸…æ™° (`params: {width: 100}`)ï¼Œæ”¯æ´ã€ŒåŸ ä½åç¨±å‹•æ…‹æ¯”å° (Port Name Fallback)ã€ã€‚
**è¡Œç‚º**ï¼šPython æœƒè‡ªå‹•å°‡ `params` åˆ†è§£ç‚º Number ç¯€é»ï¼ŒC# å‰‡å„ªå…ˆé€éåŸ ä½åç¨±ç¢ºä¿é€£ç·šæ­£ç¢ºæ€§ã€‚

#### ğŸ›¤ï¸ è»Œé“ Aï¼šCode Block å…§åµŒæ¨¡å¼ (ç©©å®š / é™ç´šè·¯å¾‘)
**é©ç”¨æƒ…å¢ƒ**ï¼šè¤‡é›œåµŒå¥—ï¼ˆå¸ƒæ—é‹ç®—ï¼‰ã€å¤šå±¤å¾ªç’°ã€æˆ–è»Œé“ B åŸ·è¡Œå¤±æ•—æ™‚ã€‚
**è¡Œç‚º**ï¼šå°‡é‚è¼¯å°è£åœ¨å–®ä¸€ Code Block ä¸­ï¼Œä¸ä¾è³´å¤–éƒ¨é€£ç·šï¼ŒæˆåŠŸç‡ 100%ã€‚

#### ğŸ›¡ï¸ è‡ªå‹•é™ç´šæ©Ÿåˆ¶ (Differentiated Fallback)
ç•¶ AI ä½¿ç”¨è»Œé“ B ç™¼é€æŒ‡ä»¤ä¸” Dynamo å›å ±éŒ¯èª¤æ™‚ï¼ŒPython Server æœƒ**è‡ªå‹•åŸ·è¡Œä»¥ä¸‹å‹•ä½œ**ï¼š
1. åµæ¸¬éŒ¯èª¤ç¯€é»é¡å‹ã€‚
2. å°‡åŸç”Ÿç¯€é»æŒ‡ä»¤è½‰æ›ç‚º DesignScript ä»£ç¢¼ã€‚
3. æŠŠæŒ‡ä»¤é‡æ–°æ‰“åŒ…ç‚ºè»Œé“ A (Number/Code Block) æ¨¡å¼ã€‚
4. **è‡ªå‹•é‡è©¦**ï¼Œç¢ºä¿å·¥ä½œæµä¸å› ç‰ˆæœ¬å·®ç•°æˆ–åº§æ¨™å¾®å·®è€Œä¸­æ–·ã€‚

---

### âš ï¸ æ ¸å¿ƒæ•™è¨“ #3ï¼šOverload é™·é˜±èˆ‡ç´¢å¼• Fallback

**ç—‡ç‹€**ï¼š`Point.ByCoordinates` åŸ ä½æ•¸é‡è®Šå‹•ã€‚
**AI è¡Œç‚ºæº–å‰‡**ï¼š
- å„ªå…ˆå‚³é `toPortName`ï¼ˆå¦‚ "z"ï¼‰ï¼Œè®“ C# åŸ·è¡Œå‹•æ…‹æ¯”å°ã€‚
- è‹¥ç„¡åç¨±ï¼Œç”± C# è‡ªå‹•æ ¹æ“š `InPorts` åˆ—è¡¨å°‹æ‰¾æœ€ç›¸è¿‘åŒ¹é…ã€‚

---

### ğŸ” æ ¸å¿ƒæ•™è¨“ #4ï¼šå¹½éˆé€£ç·š (Anti-Ghosting) åµæ¸¬

**åˆ¤å®šæº–å‰‡**ï¼š
é€é `analyze_workspace` æª¢æŸ¥ï¼Œè‹¥ `warning` æ¬„ä½æç¤ºå¤šå€‹ Sessionã€‚
**ä¿®å¾©æµç¨‹**ï¼š
1. UI é¡¯ç¤ºè­¦å‘Šè¨Šæ¯å‘ŠçŸ¥ä½¿ç”¨è€…ç•¶å‰è·¯ç”±ã€‚
2. è‹¥æ“ä½œæŒçºŒç„¡æ•ˆï¼Œå¼•å°åŸ·è¡Œé‡å•Ÿæµç¨‹ã€‚

---

### ğŸ“¦ æ ¸å¿ƒæ•™è¨“ #5ï¼šè…³æœ¬åº«å¾©ç”¨å„ªå…ˆæ–¼é‡æ–°ç”Ÿæˆ

**æœ€ä½³å¯¦è¸æµç¨‹**ï¼š
```mermaid
graph LR
    A[ä½¿ç”¨è€…è«‹æ±‚ç¹ªè£½åœ–å½¢] --> B{æŸ¥è©¢è…³æœ¬åº«}
    B -->|å­˜åœ¨| C[load_script_from_library]
    B -->|ä¸å­˜åœ¨| D[ç”Ÿæˆæ–° JSON]
    D --> E[åŸ·è¡ŒæˆåŠŸ?]
    E -->|æ˜¯| F{ä½¿ç”¨è€…ä¸‹é” /save?}
    F -->|æ˜¯| G[save_to_library]
    F -->|å¦| H[ç¶­æŒç¾ç‹€/åƒ…ä¾›å–®æ¬¡åŸ·è¡Œ]
```

**è…³æœ¬å‘½åè¦ç¯„**ï¼š
- æè¿°æ€§åç¨±ï¼š`grid_10x10`, `basic_cube_param`
- ä¸åŒ…å«å‰¯æª”å
- å°å¯« + åº•ç·š

**åƒæ•¸åŒ–è¼‰å…¥**ï¼š
```python
# åç§» 500 å–®ä½é¿å…é‡ç–Š
json_content = mcp.load_script_from_library(
    "basic_house", 
    base_x=500, 
    base_y=0
)
```


---

### ğŸ“¸ æ ¸å¿ƒæ•™è¨“ #6ï¼š/image æŒ‡ä»¤çš„æ¨™æº–å·¥ä½œæµ

**èƒŒæ™¯å•é¡Œ**ï¼š  
AI åœ¨åŸ·è¡Œ `/image` æŒ‡ä»¤æ™‚ï¼Œæ›¾ç¶“ç„¡æ³•æ­£ç¢ºå–å¾—æª”å (é¡¯ç¤ºç‚º Home)ï¼Œä¸”è¦–è¦ºåŒ–æµç¨‹æœªæ¨™æº–åŒ–ã€‚

**è§£æ±ºæ–¹æ¡ˆ**ï¼š
1. **API ä¿®æ­£**ï¼š`DynamoViewExtension` å¿…é ˆå›å‚³ `workspace.FileName` è€Œé `workspace.Name`ã€‚
2. **æ¨™æº– SOP**ï¼šåƒé–± [`domain/visual_analysis_workflow.md`](domain/visual_analysis_workflow.md)ã€‚
3. **å‘½ååŸå‰‡**ï¼šå„ªå…ˆä½¿ç”¨ `FileName` ç‚ºåŸºæº–ï¼Œé¿å…ä½¿ç”¨ `Home`ã€‚

---

### æ ¸å¿ƒæ•™è¨“ #7ï¼šåš´ç¦é‡è¤‡æ€§é–‹ç™¼èˆ‡æª”æ¡ˆäº‚ä¸Ÿ

**èƒŒæ™¯å•é¡Œ**ï¼š
å°ˆæ¡ˆä¸­å‡ºç¾å¤šå€‹åŠŸèƒ½é›·åŒçš„è…³æœ¬ï¼ˆå¦‚ `check_workspace.py`, `get_workspace_data.py` èˆ‡ `analyze_current_workspace.py` é‡è¤‡ï¼‰ï¼Œä¸”åˆ†æç”¢å‡ºçš„ JSON æª”æ¡ˆæ•£è½åœ¨æ ¹ç›®éŒ„æˆ– `tests/` ä¸­ã€‚

**å¼·åˆ¶è¦ç¯„**ï¼š
1. **ç¦æ­¢é‡è¤‡é–‹ç™¼**ï¼šåœ¨å»ºç«‹æ–°è…³æœ¬å‰ï¼Œå¿…é ˆæª¢æŸ¥ `tests/` èˆ‡ `examples/`ã€‚è‹¥å·²æœ‰é¡ä¼¼åŠŸèƒ½çš„è…³æœ¬ï¼Œæ‡‰äºˆä»¥å„ªåŒ–æˆ–åˆä½µï¼Œç¦æ­¢å»ºç«‹ `script_v2.py`ã€`check_new.py` ç­‰å†—é¤˜æª”æ¡ˆã€‚
2. **ç”¢å‡ºç‰©æ­¸ä½**ï¼š
    - **è‡¨æ™‚æ¸¬è©¦è³‡æ–™**ï¼šå¿…é ˆå­˜æ”¾æ–¼ `tests/temp/`ã€‚
    - **æ­£å¼åˆ†æå ±å‘Š/åœ–åƒ**ï¼šå¿…é ˆå­˜æ”¾æ–¼ `image/`ã€‚
    - **æ ¸å¿ƒå·¥å…·ç”¢å‡º**ï¼šåš´ç¦å‡ºç¾åœ¨æ ¹ç›®éŒ„ã€‚
3. **æ ¹ç›®éŒ„å®šé»åŒ–**ï¼šæ ¹ç›®éŒ„åƒ…å…è¨±å­˜æ”¾æ ¸å¿ƒé…ç½® (`mcp_config.json`)ã€æœå‹™å…¥å£ (`server.py`) èˆ‡æ–‡ä»¶ (`GEMINI.md`)ã€‚

---

---

### ğŸ“¦ æ ¸å¿ƒæ•™è¨“ #8ï¼šè…³æœ¬æ•´åˆèˆ‡å»é‡ç¯„ä¾‹

**èƒŒæ™¯å•é¡Œ**ï¼š  
åœ¨ `examples/` å’Œ `tests/` ä¸­ç™¼ç¾é‡è¤‡çš„ `analyze_current_workspace.py`ï¼Œé•åæ ¸å¿ƒæ•™è¨“ #7ã€‚

**æ•´åˆæ±ºç­–**ï¼š
| é …ç›® | æ±ºå®š | ç†ç”± |
|:---|:---|:---|
| **ä¿ç•™ä½ç½®** | `examples/analyze_current_workspace.py` | å±¬æ–¼å¯é‡è¤‡ä½¿ç”¨çš„æ¨™æº–å·¥å…· |
| **åŠŸèƒ½ä¾†æº** | åˆä½µ `tests/` ç‰ˆæœ¬çš„å®Œæ•´éŒ¯èª¤è™•ç† | åŒ…å« JSON è§£æã€ç·¨ç¢¼ä¿®æ­£ã€è‡ªå‹•å„²å­˜ |
| **åˆªé™¤å°è±¡** | `tests/analyze_current_workspace.py` | å·²è¢« `.gitignore` å±è”½ï¼Œå±¬è‡¨æ™‚æ¸¬è©¦ |

**æ”¹é€²é‡é»**ï¼š
1. **å®Œæ•´æ–‡æª”å­—ä¸²**ï¼šèªªæ˜è…³æœ¬ç”¨é€”ã€åŠŸèƒ½ã€ä½¿ç”¨æ–¹å¼
2. **é›™é‡ JSON è§£æ**ï¼šè™•ç† `\\` è½‰ç¾©èˆ‡ Unicode ç·¨ç¢¼å•é¡Œ
3. **è¦–è¦ºåŒ–è¼¸å‡º**ï¼šä½¿ç”¨ emoji æ¨™è¨˜ç‹€æ…‹ï¼ˆâœ… âŒ ğŸ“„ ğŸ”¢ ğŸ”—ï¼‰
4. **è‡ªå‹•å»ºç«‹ç›®éŒ„**ï¼šç¢ºä¿ `tests/temp/` å­˜åœ¨å†å¯«å…¥

**æ•´åˆå¾Œçš„é»ƒé‡‘æ¨™æº–**ï¼š
```python
# examples/analyze_current_workspace.py (118 è¡Œ)
âœ… å®Œæ•´çš„ Apache 2.0 æˆæ¬Šè²æ˜
âœ… è©³ç´°çš„ Docstring èªªæ˜
âœ… é›™é‡ JSON è§£ææ©Ÿåˆ¶ï¼ˆè™•ç†è½‰ç¾©èˆ‡ç·¨ç¢¼ï¼‰
âœ… è‡ªå‹•å„²å­˜è‡³ tests/temp/workspace_analysis.json
âœ… å‹å–„çš„ä¸­æ–‡è¼¸å‡ºèˆ‡éŒ¯èª¤è¨Šæ¯
```

---

### ğŸ›¡ï¸ è‡ªæˆ‘å¯©æŸ¥æ¸…å–® (Pre-Flight Checklist)

#### é€šç”¨æª¢æŸ¥ (æ‰€æœ‰è»Œé“)

åŸ·è¡Œä»»ä½•ç¯€é»å‰µå»ºå‰ï¼ŒAI å¿…é ˆæª¢æŸ¥ï¼š

- [ ] å·²åŸ·è¡Œ `analyze_workspace` ç¢ºèªç’°å¢ƒç‹€æ…‹
- [ ] SessionId æ˜¯å¦èˆ‡å‰æ¬¡ä¸€è‡´ (é¿å…å¹½éˆé€£ç·š)
- [ ] æ˜¯å¦æœ‰ç¾æˆè…³æœ¬å¯å¾©ç”¨ (æŸ¥è©¢ `get_script_library`)
- [ ] ç”¢å‡ºç‰©æ”¾ç½®è·¯å¾‘æ˜¯å¦ç¬¦åˆè¦ç¯„ (åš´ç¦æ”¾æ ¹ç›®éŒ„)
- [ ] å·²æ ¹æ“šæ±ºç­–çŸ©é™£é¸æ“‡é©ç•¶è»Œé“ (åƒè€ƒæ ¸å¿ƒæ•™è¨“ #1)

#### è»Œé“ A å°ˆå±¬æª¢æŸ¥

- [ ] ç¯€é»åç¨±æ˜¯å¦ç‚º `"Number"` (ä¸æ˜¯ `"Code Block"`)
- [ ] `value` æ¬„ä½ä»£ç¢¼æ˜¯å¦ä»¥ `;` çµå°¾
- [ ] è‹¥æ¶‰åŠ 3D å¹¾ä½•ï¼Œæ˜¯å¦æ˜ç¢ºæŒ‡å®š Xã€Yã€Z ä¸‰å€‹åƒæ•¸
- [ ] ä»£ç¢¼èªæ³•æ˜¯å¦ç¬¦åˆ DesignScript è¦ç¯„

**æ•…éšœè™•ç†åŸå‰‡**ï¼š
```
IF analyze_workspace å›å‚³ Warning 
THEN åœæ­¢é‡è¤‡å˜—è©¦ 
     AND åˆ†ææ ¹æœ¬åŸå›  
     AND ä¿®æ­£é‚è¼¯å¾Œå†åŸ·è¡Œ
```

---

### â›“ï¸ æ ¸å¿ƒæ•™è¨“ #10ï¼šåŸç”Ÿç¯€é»é€£ç·šèˆ‡é è¦½æ§åˆ¶ (Native Node Connections & Preview)

> **æœ€å¾Œæ›´æ–°**: 2026-01-20
> **é‡è¦ç™¼ç¾**: ç¢ºä¿åŸç”Ÿç¯€é»ã€Œç¬¬ä¸€æ¬¡å°±æˆåŠŸã€çš„ä¸‰å¤§è¦ç´ ã€‚

**1. é€£ç·šæ¬„ä½éµå¾‹**
- **éŒ¯èª¤**: `fromIndex`, `toIndex` (ç„¡æ•ˆæ¬„ä½)ã€‚
- **æ­£ç¢º**: å¿…é ˆä½¿ç”¨ **`fromPort`** èˆ‡ **`toPort`** (0-indexed)ã€‚

**2. 3D å¼·åˆ¶è½‰å‘ (Overload Control)**
- è¨±å¤šç¯€é» (å¦‚ `Point.ByCoordinates`) é è¨­ç‚º 2Dã€‚
- **è§£æ±ºæ–¹æ¡ˆ**: åœ¨ JSON ä¸­æ˜ç¢ºåŠ å…¥ `"overload": "3D"`ï¼Œç¢ºä¿ Z è»¸åŸ ä½å¯ç”¨ã€‚

**3. æ¸…æ™°åº¦æ§åˆ¶ (Preview Management)**
- **å•é¡Œ**: ä¸­é–“éç¨‹çš„å¹¾ä½•é«” (å¦‚é»ã€åŸå§‹çƒé«”) æœƒé®æ“‹æœ€çµ‚å¸ƒæ—é‹ç®—çµæœã€‚
- **è§£æ±ºæ–¹æ¡ˆ**: 
  - ä¸­é–“ç¯€é»åŠ å…¥ `"preview": false`ã€‚
  - æœ€çµ‚çµæœç¯€é»åŠ å…¥ `"preview": true`ã€‚

**åŸç”Ÿå¸ƒæ—é‹ç®—é»ƒé‡‘æ¨¡æ¿**:
```json
{
  "nodes": [
    {"id": "pt", "name": "Point.ByCoordinates", "overload": "3D", "preview": false, "x": 0, "y": 0},
    {"id": "res", "name": "Solid.Difference", "preview": true, "x": 500, "y": 0}
  ],
  "connectors": [
    {"from": "pt", "to": "res", "fromPort": 0, "toPort": 0}
  ]
}
```

---

### ğŸ“Œ ç¸½çµï¼šç•¶å‰ä¸‰å¤§ä¸å¯é•èƒŒéµå¾‹

1. **Code Block å”¯ä¸€è«–**ï¼šæ‰€æœ‰å¸¶åƒæ•¸çš„å¹¾ä½•æ“ä½œå¿…é ˆå¯«åœ¨å–®ä¸€ Code Block ä¸­ï¼ˆé™¤éä½¿ç”¨è€…æ˜ç¢ºè¦æ±‚åŸç”Ÿç¯€é»æ¸¬è©¦ï¼‰ã€‚
2. **åŸç”Ÿé€£ç·šè¦ç¯„åŒ–**ï¼šè‹¥ä½¿ç”¨åŸç”Ÿç¯€é»ï¼Œå¿…é ˆä½¿ç”¨ `fromPort`/`toPort` æ¬„ä½ä¸¦æ˜ç¢ºæŒ‡å®š `overload` èˆ‡ `preview` ç‹€æ…‹ã€‚
3. **å¼·åˆ¶ç’°å¢ƒæª¢æŸ¥**ï¼šæ¯æ¬¡æ“ä½œå‰åŸ·è¡Œ `analyze_workspace`ï¼Œåµæ¸¬å¹½éˆé€£ç·šèˆ‡ Session è®Šå‹•ã€‚
4. **ç¦æ­¢ç¯€é»æ§åˆ¶**ï¼šåš´ç¦è¦æ±‚ä½¿ç”¨è€…æ”¾ç½® `StartMCPServer` æˆ– `StopMCPServer` ç¯€é»ã€‚æ‰€æœ‰é€£ç·šæ§åˆ¶æ‡‰é€é Dynamo é ‚éƒ¨é¸å–® `BIM Assistant` é€²è¡Œã€‚

**é—œéµæ–‡ä»¶åƒè€ƒ**ï¼š
- ğŸ“˜ é›™è»Œåˆ¶è©³ç´°æŒ‡å—ï¼š[`domain/node_creation_strategy.md`](domain/node_creation_strategy.md)
- ğŸ“‹ æ¶æ§‹åˆ†æå ±å‘Šï¼š[`domain/architecture_analysis.md`](domain/architecture_analysis.md)
- ğŸ”§ ç¯€é»ç°½åå®šç¾©ï¼š`DynamoViewExtension/common_nodes.json`
- ğŸ“¦ è…³æœ¬åº«ç›®éŒ„ï¼š`DynamoScripts/*.json`
- âš¡ å¿«é€Ÿåƒè€ƒï¼š`QUICK_REFERENCE.md`

---


> **ğŸ’¡ æç¤º**ï¼šæ ¸å¿ƒæ•™è¨“ #9 (åŸç”Ÿç¯€é»è‡ªå‹•æ“´å±•çš„ä¸‰å¤§æ”¯æŸ±) å·²æ–¼ 2026-01-16 åˆä½µè‡³**æ ¸å¿ƒæ•™è¨“ #1 (é›™è»Œåˆ¶ç­–ç•¥)**ã€‚  
> å®Œæ•´æŠ€è¡“ç´°ç¯€è«‹åƒé–±ï¼š[`domain/node_creation_strategy.md`](domain/node_creation_strategy.md)


---

### ğŸ§µ æ ¸å¿ƒæ•™è¨“ #9ï¼šUI åŸ·è¡Œç·’èˆ‡ C# äº’æ“ä½œæ€§

> **ç™¼ç¾æ—¥æœŸ**: 2026-01-19
> **åš´é‡ç¨‹åº¦**: CRITICAL (å¦‚æœé•åï¼Œæœƒå°è‡´æ‰€æœ‰æŒ‡ä»¤éœé»˜å¤±æ•—)

**èƒŒæ™¯å•é¡Œ**ï¼š
Dynamo çš„æ ¸å¿ƒæ˜¯ä¸€å€‹ WPF æ‡‰ç”¨ç¨‹å¼ã€‚ç•¶æˆ‘å€‘å¾ WebSocket (èƒŒæ™¯åŸ·è¡Œç·’) æ¥æ”¶æŒ‡ä»¤ä¸¦è©¦åœ–å»ºç«‹ç¯€é»æ™‚ï¼Œæœƒè§¸ç™¼ `NotifyCollectionChanged` ç•°å¸¸ï¼Œå°è‡´ç¨‹å¼å´©æ½°æˆ–ç„¡åæ‡‰ï¼Œä½†å¤–éƒ¨ Python ç«¯å»é¡¯ç¤ºæˆåŠŸã€‚

**å¼·åˆ¶è¦ç¯„**ï¼š
ä»»ä½•æ¶‰åŠ Dynamo æ¨¡å‹ä¿®æ”¹çš„æ“ä½œ (CreateNode, MakeConnection, DeleteModel)ï¼Œ**å¿…é ˆ** åŒ…è£åœ¨ `Application.Current.Dispatcher.InvokeAsync` ä¸­ã€‚

**C# å¯¦ä½œç¯„æœ¬**ï¼š
```csharp
await System.Windows.Application.Current.Dispatcher.InvokeAsync(() => 
{
    // æ‰€æœ‰ GraphHandler çš„æ“ä½œå¿…é ˆåœ¨æ­¤é–‰åŒ…å…§åŸ·è¡Œ
    response = _handler.HandleCommand(json);
});
```

**AI Debug æŒ‡å—**ï¼š
1. è‹¥ Python é¡¯ç¤º `âœ… æˆåŠŸ` ä½† Dynamo ç•«é¢æ²’è®Šã€‚
2. æª¢æŸ¥ `DynamoMCP.log` æ˜¯å¦æœ‰ `CollectionChanged` ç›¸é—œéŒ¯èª¤ã€‚
3. è‹¥æœ‰ï¼Œå¹¾ä¹ 100% æ˜¯å› ç‚ºæ²’æœ‰åœ¨ UI åŸ·è¡Œç·’åŸ·è¡Œã€‚

---

### ğŸ¯ æ ¸å¿ƒæ•™è¨“ #11ï¼šPython Script åå°„æ³¨å…¥çš„ä¸‰é‡ä¿éšœ

> **æœ€å¾Œæ›´æ–°**: 2026-01-24  
> **çªç ´æ„ç¾©**: å¾¹åº•è§£æ±º Dynamo 3.3 çš„ Python ç¯€é»ä»£ç¢¼æ³¨å…¥èˆ‡ UI åŒæ­¥å•é¡Œ

**èƒŒæ™¯å•é¡Œ**ï¼š
Dynamo 3.3 ä¸­ï¼Œä½¿ç”¨æ¨™æº–çš„ `UpdateModelValueCommand` ç„¡æ³•å°‡ Python ä»£ç¢¼æ­£ç¢ºé¡¯ç¤ºåœ¨ç¯€é» UI ä¸­ï¼Œå³ä½¿æ¨¡å‹å±¬æ€§å·²æ›´æ–°ã€‚

**è§£æ±ºæ–¹æ¡ˆï¼šä¸‰é‡ä¿éšœæ©Ÿåˆ¶**

#### 1. åç¨±å¾ªç’°å˜—è©¦ (Node Creation Name Loop)
ä¾åºå˜—è©¦å¤šå€‹å¯èƒ½çš„ç¯€é»åç¨±ï¼Œç¢ºä¿è·¨ç‰ˆæœ¬ç›¸å®¹æ€§ï¼š
```csharp
string[] possibleNames = { 
    "Python Script",                  // 3.3+ æ¨è–¦
    "Core.Scripting.Python Script",   // 3.0-3.2
    "PythonScript"                    // 2.x
};
```

#### 2. å°ˆç”¨æŒ‡ä»¤åå°„èª¿ç”¨ (Dedicated Command Reflection)
å‹•æ…‹æœå°‹ä¸¦èª¿ç”¨ Dynamo å…§éƒ¨çš„ `UpdatePythonNodeCommand`ï¼š
```csharp
// åœ¨æ‰€æœ‰å·²è¼‰å…¥çµ„ä»¶ä¸­æœå°‹å°ˆç”¨æŒ‡ä»¤
Type cmdType = asm.GetType("Dynamo.Models.DynamoModel+UpdatePythonNodeCommand");
object cmdInstance = Activator.CreateInstance(cmdType, new object[] { 
    dynamoGuid, pythonCode, "CPython3" 
});
_model.ExecuteCommand(cmdInstance as RecordableCommand);
```
**å„ªå‹¢**ï¼šåŒæ™‚è¨­ç½®ä»£ç¢¼èˆ‡ CPython3 å¼•æ“ï¼Œç¬¦åˆ Dynamo å…§éƒ¨è¨­è¨ˆé‚è¼¯ã€‚

#### 3. UI å¼·åˆ¶åŒæ­¥ (Forced UI Sync)
åå°„èª¿ç”¨ `OnNodeModified` æ–¹æ³•ï¼Œå¼·åˆ¶ WPF UI é‡æ–°è®€å–å±¬æ€§ï¼š
```csharp
// ç›´æ¥è¨­ç½® Script å±¬æ€§
PropertyInfo scriptProp = pythonNode.GetType()
    .GetProperty("Script", BindingFlags.Public | BindingFlags.Instance);
scriptProp.SetValue(pythonNode, pythonCode);

// è§¸ç™¼ UI æ›´æ–°é€šçŸ¥
MethodInfo onModified = pythonNode.GetType()
    .GetMethod("OnNodeModified", BindingFlags.NonPublic | BindingFlags.Instance);
onModified.Invoke(pythonNode, new object[] { true });
```

**æˆåŠŸç‡**ï¼š100%ï¼ˆå·²é©—è­‰å¯æ­£ç¢ºé¡¯ç¤ºä»£ç¢¼èˆ‡è¨­ç½® CPython3 å¼•æ“ï¼‰

**åƒè€ƒæ–‡ä»¶**ï¼š
- ğŸ“˜ è©³ç´°æŠ€è¡“èªªæ˜ï¼š[`domain/python_script_automation.md`](domain/python_script_automation.md)
- ğŸ“˜ English Version: [`domain/python_script_automation_EN.md`](domain/python_script_automation_EN.md)
- ğŸ”§ C# å¯¦ä½œï¼š`DynamoViewExtension/src/GraphHandler.cs:L314-363`

---

### ğŸ”— æ ¸å¿ƒæ•™è¨“ #12ï¼šç¯€é»é€£ç·šçš„è·¨èªè¨€ ID æ˜ å°„

> **æœ€å¾Œæ›´æ–°**: 2026-01-24  
> **æ ¸å¿ƒæ©Ÿåˆ¶**: Python å­—ä¸² ID â†” C# GUID é›™å‘æ˜ å°„

**æŠ€è¡“æŒ‘æˆ°**ï¼š
Python ç«¯ä½¿ç”¨äººé¡å¯è®€çš„å­—ä¸² IDï¼ˆå¦‚ `"pt1"`, `"cube_width_1234"`ï¼‰ï¼Œä½† Dynamo å…§éƒ¨è¦æ±‚ GUID æ ¼å¼ã€‚é€£ç·šæ™‚å¿…é ˆæ­£ç¢ºæ˜ å°„å…©ç¨® IDã€‚

**è§£æ±ºæ–¹æ¡ˆï¼šæ˜ å°„è¡¨æ©Ÿåˆ¶**

1. **ç¯€é»å‰µå»ºæ™‚è¨˜éŒ„æ˜ å°„** (`GraphHandler.cs:L120-127`)ï¼š
   ```csharp
   Guid dynamoGuid = Guid.TryParse(nodeIdStr, out Guid parsedGuid) 
       ? parsedGuid : Guid.NewGuid();
   _nodeIdMap[nodeIdStr] = dynamoGuid;  // è¨˜éŒ„ "pt1" -> GUID
   ```

2. **é€£ç·šæ™‚æŸ¥è©¢æ˜ å°„** (`GraphHandler.cs:L244-256`)ï¼š
   ```csharp
   if (!_nodeIdMap.TryGetValue(fromIdStr, out fromId)) {
       fromId = Guid.Parse(fromIdStr);  // é™ç´šè™•ç†
   }
   ```

3. **JSON é€£ç·šæ ¼å¼è¦ç¯„**ï¼š
   ```json
   {
     "connectors": [{
       "from": "pt1",       // å­—ä¸² ID
       "to": "line1",       // å­—ä¸² ID
       "fromPort": 0,       // å¿…é ˆä½¿ç”¨ fromPortï¼ˆä¸æ˜¯ fromIndexï¼‰
       "toPort": 0          // å¿…é ˆä½¿ç”¨ toPortï¼ˆä¸æ˜¯ toIndexï¼‰
     }]
   }
   ```

**é—œéµæ¬„ä½**ï¼š
- âœ… ä½¿ç”¨ `fromPort` / `toPort`ï¼ˆæ­£ç¢ºï¼‰
- âŒ ä½¿ç”¨ `fromIndex` / `toIndex`ï¼ˆéŒ¯èª¤ï¼Œç„¡æ•ˆæ¬„ä½ï¼‰

**åƒè€ƒæ–‡ä»¶**ï¼š
- ğŸ“˜ è©³ç´°æŠ€è¡“èªªæ˜ï¼š[`domain/node_connection_workflow.md`](domain/node_connection_workflow.md)
- ğŸ“˜ English Version: [`domain/node_connection_workflow_EN.md`](domain/node_connection_workflow_EN.md)
- ğŸ”§ C# å¯¦ä½œï¼š`DynamoViewExtension/src/GraphHandler.cs:L244-256`

---

### ğŸ“¡ æ ¸å¿ƒæ•™è¨“ #13ï¼šWebSocket Session è¡çªèˆ‡ Bridge Server è·¯ç”±éµå¾‹

> **æœ€å¾Œæ›´æ–°**: 2026-01-25
> **é‡è¦ç™¼ç¾**: ç•¶å¤šå€‹é€£ç·šï¼ˆå¦‚æ‰‹å‹•æ¸¬è©¦è…³æœ¬èˆ‡ MCP Serverï¼‰åŒæ™‚å­˜åœ¨æ™‚ï¼ŒæŒ‡ä»¤å¯èƒ½è¢«è·¯ç”±è‡³éŒ¯èª¤çš„ Sessionã€‚

**1. å¹½éˆæŒ‡ä»¤è¨ºæ–·**
- **ç—‡ç‹€**: æŒ‡ä»¤ç™¼é€é¡¯ç¤ºã€ŒæˆåŠŸã€ï¼Œä½†åˆ†æå·¥å…·å›å ± `nodeCount: 0` ä¸”ä½¿ç”¨è€…çœ‹ä¸åˆ°æ±è¥¿ã€‚
- **åŸå› **: æŒ‡ä»¤ç™¼é€è‡³äº†ä¸€å€‹ã€Œéæ´»å‹•ã€æˆ–ã€Œå¾Œå°ç›£è½ã€çš„ Sessionï¼ˆä¾‹å¦‚è‡ªå®šç¾©çš„ `AI_AGENT_SESSION`ï¼‰ï¼Œè€Œé Dynamo Extension çœŸæ­£ä½¿ç”¨çš„ä½œç”¨ä¸­ Sessionã€‚

**2. å¼·åˆ¶æ€§è§£æ±ºæ–¹æ¡ˆï¼šçµ±ä¸€é€é Bridge Server**
- **éŒ¯èª¤**: ç›´æ¥é€£ç·š `ws://localhost:65535` ä¸¦è‡ªè¨‚ Sessionã€‚
- **æ­£ç¢º**: é€é `ws://localhost:65296` (Bridge Server) èª¿ç”¨ `execute_dynamo_instructions`ã€‚
- **å„ªå‹¢**: `server.py` æœƒè‡ªå‹•é–å®šæœ€å¾Œä¸€å€‹æœ‰æ•ˆçš„ Dynamo Session ID ä¸¦é€²è¡Œè·¯ç”±ï¼Œç¢ºä¿æŒ‡ä»¤è§¸ç™¼ UI æ›´æ–°ã€‚

**3. é æª¢æµç¨‹ (Pre-check)**
- æ¯æ¬¡é‡é€£æˆ–ç™¼é€æŒ‡ä»¤å‰ï¼Œå…ˆåŸ·è¡Œ `analyze_workspace` ä»¥å–å¾—ç•¶å‰ä½œç”¨ä¸­çš„ `sessionId`ã€‚

### â›“ï¸ æ ¸å¿ƒæ•™è¨“ #14ï¼šå¤šæœƒè©±è·¯ç”±èˆ‡é˜²å¹½éˆè‡ªå‹•æ¸…ç† (v1.3)

> **æœ€å¾Œæ›´æ–°**: 2026-01-25
> **æ ¸å¿ƒæ©Ÿåˆ¶**: `sessionId` ç²¾ç¢ºè·¯ç”± + Inactive é€¾æ™‚æ¸…ç†

**1. ç²¾ç¢ºè·¯ç”± (Strict Routing)**
- ç•¶é–‹å•Ÿå¤šå€‹è¦–çª—æ™‚ï¼Œ`execute_dynamo_instructions` æ”¯æ´ `sessionId` åƒæ•¸ã€‚é€™èƒ½ç¢ºä¿æŒ‡ä»¤ç™¼é€è‡³ã€Œä½¿ç”¨è€…æ­£åœ¨æ“ä½œã€çš„è¦–çª—ï¼Œè€Œéç„¡æ„ä¸­ç™¼é€è‡³å¾Œå°å¯¦ä¾‹ã€‚
- **å·¥å…·å¯¦è¸**: ä½¿ç”¨ `list_sessions` å–å¾—å¸¶æœ‰æª”åçš„æœƒè©±åˆ—è¡¨ï¼Œä¸¦åœ¨éœ€è¦æ™‚æ‰‹å‹•æŒ‡å®š IDã€‚

**2. è‡ªå‹•æ¸…ç† (Auto Anti-Ghosting)**
- `server.py` ç¾åœ¨æœƒè¨˜éŒ„æ¯å€‹é€£ç·šçš„ `lastSeen` æ™‚é–“ã€‚
- åœ¨åŸ·è¡Œ `analyze_workspace` æ™‚æœƒè‡ªå‹•è§¸ç™¼ `cleanup_stale_sessions`ï¼Œå‰”é™¤è¶…é 30 ç§’ç„¡å¿ƒè·³åæ‡‰çš„æ­»é€£ç·šã€‚
- **å„ªå‹¢**: å¾¹åº•è§£æ±ºäº†ã€Œé€£ç·šé‚„åœ¨ä½†æŒ‡ä»¤ç„¡æ•ˆã€çš„å¹½éˆé€£ç·šå›°æ“¾ã€‚

**3. æ•ˆèƒ½ç›£æ§ (Performance Monitoring)**
- æ–°å¢ `get_server_stats` å·¥å…·ï¼Œå¯å›å‚³ Uptimeã€ç´¯è¨ˆæŒ‡ä»¤æ•¸èˆ‡æ´»èºé€£ç·šæ•¸ã€‚
- æœ‰åŠ©æ–¼è¨ºæ–·é€šè¨Šç“¶é ¸èˆ‡ WebSocket ç©©å®šæ€§ã€‚

---

### ğŸ“¦ æ ¸å¿ƒæ•™è¨“ #15ï¼šç„¡ç—›å®‰è£èˆ‡æ¬Šé™ç¹é (Junction ç­–ç•¥)

> **æœ€å¾Œæ›´æ–°**: 2026-01-25
> **èƒŒæ™¯**: Windows ä¸‹å»ºç«‹ Symbolic Link é€šå¸¸éœ€è¦ç®¡ç†å“¡æ¬Šé™ï¼Œé€ æˆ Skill å®‰è£å›°é›£ã€‚

**è§£æ±ºæ–¹æ¡ˆ**: 
- ä½¿ç”¨ **Directory Junction (ç›®éŒ„æ¥åˆé»)** ä»£æ›¿ Symbolic Linkã€‚
- **æŒ‡ä»¤**: `cmd /c mklink /j <Target> <Source>`ã€‚
- **å„ªé»**: åœ¨å¤§å¤šæ•¸ Windows è¨­å®šä¸‹ï¼Œå»ºç«‹ Junction ä¸éœ€è¦æå‡æ¬Šé™ï¼Œä¸”å° AI ä»£ç†ç¨‹å¼è€Œè¨€è¡Œç‚ºèˆ‡ä¸€èˆ¬è³‡æ–™å¤¾ä¸€è‡´ã€‚
- **è‡ªå‹•åŒ–**: é€é `setup.ps1` ä¸€éµè™•ç† dependenciesã€deployment èˆ‡ linkingã€‚

---
